/*! qit.js v1.0.0 (c) 2015-2019 OHARA Hiroyuki @license MIT */
!function(t,i,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():t.qit=n()}(this,0,function(s){"use strict";var e=Object.getPrototypeOf,r=Object.prototype,n=Array.prototype.slice,u=r.toString,h=Object().toString(),t=this||(0,eval)("this"),o=t.Symbol?t.Symbol:{iterator:"@@iterator"};t.qoo&&t.qoo;function f(t){var i,n;return!(!t||"object"!=typeof t||u.call(t)!==h)&&(null===(i=e(t))?"function"!=typeof(n=t.constructor)||n.prototype!==t:i===r||null===e(i))}function i(t,i,n){var e=i.prototype;return t.prototype=Object.create(e,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i._inherit_&&i._inherit_.call(i,t),t.super_=i,t._super_=e,n&&c(t,n),t}function c(t,i){var n,e=t.prototype;for(n in i)e[n]=i[n]}function a(){}function l(t,i,n){return new p(t,i,n)}function d(t){for(var i=[],n=0,e=t.length;n<e;++n)i.push(new p(t[n]));return i}function p(t,i,n){var e=null;if(i!==s?"function"==typeof i?e=new _(t,i):"number"==typeof t&&"number"==typeof i&&(e=new y(t,i,n)):t instanceof p?(t.rewind(),e=t):"string"==typeof t?e=new w(t):Array.isArray(t)?e=new x(t):f(t)?t.next&&"function"==typeof t.next?this.iter=t:e=new v(t):t[o.iterator]?this.iter=t[o.iterator].call(t):this.iter=t,e)return e;this.rewind()}function w(t){this.str=t,this.len=t.length,this.rewind()}function x(t){this.arr=t,this.len=t.length,this.rewind()}function v(t){this.obj=t,this.keys=Object.keys(t),this.len=this.keys.length,this.rewind()}function _(t,i){this.first=t,this.func=i,this.rewind()}function y(t,i,n){this.first=t,n===s?(this.last=i,this.step=t<=i?1:-1):(this.last=n,this.step=i-t),this.rewind()}function b(t){this.iters=d(t),this.rewind()}function I(t,i){this.iter=t,this.func=i,this.rewind()}function F(t,i,n,e){this.iter=t,this.offset=i,this.len=n,this.norewind=e,this.rewind()}function g(t,i){this.iter=t,this.func=i,this.rewind()}function m(t,i){this.iter=t,this.func=i,this.rewind()}function j(t,i){this.iter=t,this.func=i,this.rewind()}function k(t,i,n){this.iter=t,this.func=i,this.init=n,this.rewind()}function A(t,i,n,e){this.iters=d(t),this.func=i,this.longest=n,this.fillvalue=e===s?null:e,this.rewind()}function O(t){this.iter=t,this.rewind()}function S(t,i){this.iter=t,this.len=i,this.rewind()}function W(t){this.iter=t,this.rewind()}return p.prototype[o.iterator]=function(){return this},c(p,{_next:function(){if(this.finished)return{done:!0};var t=this.iter.next();return t.done&&(this.finished=!0),t},next:function(){return this._next()},rewind:function(){return this.finished=!1,this.iter&&this.iter.rewind&&this.iter.rewind(),this},each:function(t){for(var i;!(i=this.next()).done;)t(i.value)},reduce:function(t,i){var n,e=i;if(i===s){if((n=this.next()).done)return e;e=n.value}for(;!(n=this.next()).done;)e=t(e,n.value);return e},toArray:function(){return this.reduce(function(t,i){return t.push(i),t},[])},head:function(t){return s},concat:function(t){return new b([this].concat(n.call(arguments)))},map:function(t){return new I(this,t)},take:function(t){return new F(this,0,t)},drop:function(t){return new F(this,t)},filter:function(t){return new g(this,t)},takeWhile:function(t){return new m(this,t)},dropWhile:function(t){return new j(this,t)},scan:function(t,i){return new k(this,t,i)},zipWith:function(t,i){return new A([this].concat(n.call(arguments,1)),t)},zipWithLongest:function(t,i){return new A([this].concat(n.call(arguments,1)),t,!0)},zip:function(t){return new A([this].concat(n.call(arguments)))},zipLongest:function(t){return new A([this].concat(n.call(arguments)),s,!0)},cycle:function(){return new O(this)},buffered:function(t){return new S(this,t)},chunk:function(t){var i=this;return new A(Array.apply(null,Array(t)).map(function(){return i}),s,!0,a).map(function(t){return l(t).takeWhile(function(t){return t!==a})})},flatten:function(){return new W(this)},flatMap:function(t){return this.map(t).flatten()},product:function(t){var i=this.reduce(function(t,n){return l(t).flatMap(function(i){return l(n).map(function(t){return l(i).concat([t])})})},[[]]);return t?i:i.map(function(t){return t.toArray()})},find:function(t){for(var i;!(i=this.next()).done;)if(t(i.value))return i.value;return s},every:function(t){for(var i;!(i=this.next()).done;)if(!t(i.value))return!1;return!0},some:function(t){for(var i;!(i=this.next()).done;)if(t(i.value))return!0;return!1},includes:function(i){return this.some(function(t){return t===i})}}),i(w,p,{rewind:function(){return this.idx=0,w._super_.rewind.call(this)},next:function(){return this.idx>=this.len?{done:this.finished=!0}:{value:this.str[this.idx++],done:!1}}}),i(x,p,{rewind:function(){return this.idx=0,x._super_.rewind.call(this)},next:function(){return this.idx>=this.len?{done:this.finished=!0}:{value:this.arr[this.idx++],done:!1}}}),i(v,p,{rewind:function(){return this.idx=0,v._super_.rewind.call(this)},next:function(){if(this.idx>=this.len)return{done:this.finished=!0};var t=this.keys[this.idx++];return{value:[t,this.obj[t]],done:!1}}}),i(_,p,{rewind:function(){return this.isFirst=!0,this.curr=null,_._super_.rewind.call(this)},next:function(){return this.isFirst?(this.isFirst=!1,this.curr=this.first===s?this.func():this.first):this.curr=this.func(this.curr),this.curr===s?{done:this.finished=!0}:{value:this.curr,done:!1}}}),i(y,p,{rewind:function(){return this.curr=this.first,y._super_.rewind.call(this)},next:function(){if(0<this.step&&this.curr>this.last||this.step<0&&this.curr<this.last)return{done:this.finished=!0};var t=this.curr;return this.curr+=this.step,{value:t,done:!1}}}),i(b,p,{rewind:function(){this.idx=0,this.len=this.iters.length;for(var t=0,i=this.len;t<i;++t)this.iters[t].rewind();return b._super_.rewind.call(this)},next:function(){var t=this.iters[this.idx].next();if(!t.done)return t;do{if(++this.idx>=this.len)return{done:this.finished=!0};t=this.iters[this.idx].next()}while(t.done);return t}}),i(I,p,{next:function(){var t=this._next();return t.done?t:{value:this.func(t.value),done:!1}}}),i(F,p,{rewind:function(){return this.isFirst=!0,this.idx=0,this.norewind?(this.finished=!1,this):F._super_.rewind.call(this)},next:function(){var t,i;if(this.isFirst){for(i=0;i<this.offset;++i)if((t=this._next()).done)return t;this.isFirst=!1}return(this.len===s||this.idx<this.len)&&(t=this._next(),this.idx++,!t.done)?t:{done:this.finished=!0}}}),i(g,p,{next:function(){var t;do{if((t=this._next()).done)return t}while(!this.func(t.value));return t}}),i(m,p,{next:function(){var t;return(t=this._next()).done||this.func(t.value)?t:{done:this.finished=!0}}}),i(j,p,{rewind:function(){return this.isFirst=!0,j._super_.rewind.call(this)},next:function(){var t;if((t=this._next()).done)return t;if(this.isFirst){for(;this.func(t.value);)if((t=this._next()).done)return t;this.isFirst=!1}return t}}),i(k,p,{rewind:function(){return this.acc=null,this.isFirst=!0,k._super_.rewind.call(this)},next:function(){var t=this._next();return!t.done&&this.isFirst&&(this.init===s?(this.acc=t.value,t=this._next()):this.acc=this.init,this.isFirst=!1),t.done?t:(this.acc=this.func(this.acc,t.value),{value:this.acc,done:!1})}}),i(A,p,{rewind:function(){var t,i=this.len=this.iters.length;for(t=0;t<i;++t)this.iters[t].rewind();return A._super_.rewind.call(this)},next:function(){var t,i,n=0,e=this.len,r=[];for(i=0;i<e;++i){if((t=this.iters[i].next()).done){if(n++,!this.longest||e<=n)return this.finished=!0,t;t.value=this.fillvalue}r.push(t.value)}return this.func===s?{value:r,done:!1}:{value:this.func.apply(this,r),done:!1}}}),i(O,p,{next:function(){var t=this._next();return t.done?(this.rewind(),this._next()):t}}),i(S,p,{rewind:function(){return this.isFirst=!0,this.buffer=[],S._super_.rewind.call(this)},head:function(t){return t=t===s?0:t,this.isFirst&&this.prepare(),this.buffer[t]},prepare:function(){var t,i;for(t=0;t<this.len;++t)i=this.iter.next(),this.buffer.push(i);this.isFirst=!1},next:function(){if(this.finished)return{done:!0};this.isFirst&&this.prepare();var t=this.iter.next(),i=this.buffer.shift();return this.buffer.push(t),i.done&&(this.finished=!0),i}}),i(W,p,{rewind:function(){return this.currentIter=null,W._super_.rewind.call(this)},next:function(){for(;;){if(!this.currentIter){var t=this.iter.next();if(t.done)return{done:this.finished=!0};this.currentIter=new p(t.value)}var i=this.currentIter.next();if(!i.done)return i;this.currentIter=null}}}),l.isPlainObject=f,l.Iterator=p,l.StringIterator=w,l.ArrayIterator=x,l.ObjectIterator=v,l.FollowIterator=_,l.RangeIterator=y,l.AppendIterator=b,l.MapIterator=I,l.LimitIterator=F,l.FilterIterator=g,l.TakeWhileIterator=m,l.DropWhileIterator=j,l.ScanIterator=k,l.ZipIterator=A,l.CycleIterator=O,l.BufferedIterator=S,l.FlattenIterator=W,l.Symbol=o,l});